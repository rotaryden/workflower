{{define "content"}}
<div class="text-center mb-10">
    <div class="inline-flex items-center gap-2 px-4 py-2 bg-amber-500/20 rounded-full text-amber-400 text-sm font-medium mb-4">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
        Awaiting Your Review
    </div>
    <h1 class="font-display text-4xl font-bold mb-3 text-white">Review & Approve</h1>
    <p class="text-gray-400 max-w-xl mx-auto">
        Review the generated content below. Edit as needed, then approve to send to Suno.
    </p>
</div>

<form action="/workflow/{{.Workflow.ID}}/submit" method="POST" class="space-y-6">
    <!-- Original Description -->
    <div class="glass-card rounded-xl p-6">
        <h3 class="flex items-center gap-2 text-sm font-medium text-gray-400 mb-3">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            Original Description
        </h3>
        <p class="text-gray-300 leading-relaxed">{{.Workflow.TaskDescription}}</p>
    </div>

    <!-- Lyrics Editor -->
    <div class="glass-card glow-border rounded-xl p-6">
        <label class="flex items-center gap-2 text-lg font-semibold text-white mb-4">
            <svg class="w-5 h-5 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"/>
            </svg>
            Lyrics with Instructions
        </label>
        <textarea 
            name="edited_lyrics" 
            rows="16" 
            class="w-full px-4 py-4 bg-black/30 border border-white/10 rounded-lg text-white font-mono text-sm focus:outline-none input-glow transition resize-none leading-relaxed"
        >{{.Workflow.EditedLyrics}}</textarea>
    </div>

    <!-- Properties -->
    <div class="grid md:grid-cols-2 gap-6">
        <!-- Style -->
        <div class="glass-card rounded-xl p-5">
            <label class="block text-sm font-medium text-gray-300 mb-2">Style</label>
            <input 
                type="text" 
                name="style" 
                value="{{.Workflow.EditedProperties.Style}}"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none input-glow transition"
            >
        </div>
        
        <!-- Vocal Type -->
        <div class="glass-card rounded-xl p-5">
            <label class="block text-sm font-medium text-gray-300 mb-2">Vocal Type</label>
            <input 
                type="text" 
                name="vocal_type" 
                value="{{.Workflow.EditedProperties.VocalType}}"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none input-glow transition"
            >
        </div>
        
        <!-- Weirdness -->
        <div class="glass-card rounded-xl p-5">
            <label class="block text-sm font-medium text-gray-300 mb-2">
                Weirdness: <span id="weirdness-value">{{printf "%.1f" .Workflow.EditedProperties.Weirdness}}</span>
            </label>
            <input 
                type="range" 
                name="weirdness" 
                min="0" 
                max="1" 
                step="0.1" 
                value="{{.Workflow.EditedProperties.Weirdness}}"
                oninput="document.getElementById('weirdness-value').textContent = parseFloat(this.value).toFixed(1)"
                class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-violet-500"
            >
        </div>
        
        <!-- Style Influence -->
        <div class="glass-card rounded-xl p-5">
            <label class="block text-sm font-medium text-gray-300 mb-2">Style Influence</label>
            <input 
                type="text" 
                name="style_influence" 
                value="{{.Workflow.EditedProperties.StyleInfluence}}"
                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none input-glow transition"
            >
        </div>
    </div>

    {{if .Workflow.IsPremium}}
    <!-- Premium Features -->
    <div class="glass-card rounded-xl p-6 border border-amber-500/30">
        <h3 class="flex items-center gap-2 text-lg font-semibold text-amber-400 mb-4">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
            </svg>
            Premium Features
        </h3>
        <div class="grid md:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Persona</label>
                <textarea 
                    name="persona" 
                    rows="3"
                    class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none input-glow transition resize-none text-sm"
                >{{if .Workflow.PersonaInspo}}{{.Workflow.PersonaInspo.Persona}}{{end}}</textarea>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Inspo</label>
                <textarea 
                    name="inspo" 
                    rows="3"
                    class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none input-glow transition resize-none text-sm"
                >{{if .Workflow.PersonaInspo}}{{.Workflow.PersonaInspo.Inspo}}{{end}}</textarea>
            </div>
        </div>
    </div>
    {{end}}

    {{if .Workflow.AudioFileName}}
    <!-- Audio Reference -->
    <div class="glass-card rounded-xl p-5 flex items-center gap-4">
        <div class="w-12 h-12 rounded-lg bg-rose-500/20 flex items-center justify-center">
            <svg class="w-6 h-6 text-rose-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"/>
            </svg>
        </div>
        <div>
            <p class="text-sm text-gray-400">Audio Reference</p>
            <p class="text-white font-medium">{{.Workflow.AudioFileName}}</p>
        </div>
    </div>
    {{end}}

    <!-- Action Buttons -->
    <div class="flex flex-col sm:flex-row gap-4 justify-center pt-4">
        <button 
            type="submit" 
            name="action" 
            value="approve"
            class="btn-primary px-10 py-4 rounded-xl text-lg font-semibold text-white flex items-center justify-center gap-2"
        >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            Approve & Send to Suno
        </button>
        <button 
            type="submit" 
            name="action" 
            value="reject"
            class="px-10 py-4 rounded-xl text-lg font-medium text-gray-400 border border-gray-600 hover:border-rose-500 hover:text-rose-400 transition flex items-center justify-center gap-2"
        >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
            Reject
        </button>
    </div>
</form>
{{end}}
